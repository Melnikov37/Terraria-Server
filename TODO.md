# Terraria Server Admin — TODO

## В работе / Planned

### 1. Авто-бекап миров ✅
- [x] Фоновый поток: каждый час копирует `worlds/*.wld` в `backups/auto/<timestamp>/`
- [x] Хранить не более N последних авто-бекапов (`BACKUP_KEEP_COUNT`, default 24)
- [x] Страница `/backups` — список бекапов (авто + ручные) с датой/размером
- [x] Кнопка "Create backup now" (ручной бекап)
- [x] Кнопка "Restore" — останавливает сервер, копирует файл, запускает
- [x] Кнопка "Delete" на каждый бекап

### 2. Лог-вьювер ✅
- [x] Страница `/logs` — вывод `journalctl -u terraria -n 300 --no-pager`
- [x] Кнопка "Refresh", автообновление в режиме Follow каждые 3 сек
- [x] Фильтрация: All / Warnings & Errors / Errors only
- [x] Кнопка "Follow" — live polling новых строк
- [x] Цветовая подсветка ошибок/предупреждений/info

### 3. Публичная страница со списком модов ✅
- [x] Роут `/mods/public` — без авторизации (для игроков)
- [x] Список включённых модов: название, версия, Workshop ID, ссылка
- [x] Кнопка "Copy all Workshop IDs"
- [x] Инструкция как установить моды (5 шагов)

### 4. Мониторинг ресурсов ✅
- [x] Добавить `psutil` в requirements.txt
- [x] Виджет на дашборде: CPU%, RAM, Disk, Server RAM
- [x] API `/api/metrics` для JS-полинга каждые 8 сек

### 5. Список игроков на дашборде ✅
- [x] Онлайн-игроки с кнопкой Kick прямо на главной
- [x] Авто-обновление каждые 10 сек через JS fetch `/api/players`

### 6. Смена мира без пересоздания ✅
- [x] Секция "Switch World" на странице `/world`
- [x] Список `.wld` файлов из папки `worlds/` с размером и датой
- [x] Выбор мира → обновляет `serverconfig.txt` → рестарт сервера
- [x] Текущий активный мир выделен в дропдауне

### 7. tModLoader авто-апдейт ✅
- [x] Кнопка "Update tModLoader" в Config
- [x] Сравнивает с GitHub releases, показывает "Update Available"
- [x] Скачивает новый zip, заменяет файлы, рестарт сервера
- [x] Бекап текущей версии перед обновлением
- [x] Ссылка на Changelog на GitHub

## Сделано ✅

- [x] Поддержка tModLoader (установка, запуск через screen)
- [x] Управление модами: установка по Workshop ID, загрузка .tmod, enable/disable/delete
- [x] Авто-определение и установка зависимостей модов (парсинг бинарного Info файла)
- [x] Версия мода в списке, метаданные (workshop_id, last_updated)
- [x] Кнопки "Update" и "Update All" для модов
- [x] Фоновое авто-обновление модов (MOD_UPDATE_INTERVAL_HOURS)
- [x] Установка steamcmd через install.sh
- [x] Базовое управление игроками (kick, ban)
- [x] Управление миром (время, save, broadcast, raw command)
- [x] Конфигурация сервера через UI
